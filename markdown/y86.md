---
title: Y86-64
...

Our textbook provides a simplified instruction set, which they call Y86-64, based on x86-64 for use in building a processor without getting overwhelmed by the complexity of x86-64.
This page summarizes some of that information for ease of reference.

# x86-64 vs Y86-64

x86-64      Y86-64      Operands    Notes
-------     -------     ---------   -----------------
`nop`       `nop`                   Does nothing
            `hlt`                   stops the processor entirely (the similar instruction in x86-64 is kernel-only)
`addq`      `addq`      rA, rB
`subq`      `subq`      rA, rB      Y86 doesn't have `cmpq` so this is used instead
`andq`      `andq`      rA, rB      Y86 doesn't have `testq` so this is used instead
`xorq`      `xorq`      rA, rB
`pushq`     `pushq`     rA
`popq`      `popq`      rA
`call`      `call`      V
`ret`       `ret`       
`jmp`       `jmp`       V
`j`CC       `j`CC       V           where CC is a condition like `le`, `g`, `e`, etc
`movq`      `irmovq`    V, rB
`movq`      `rrmovq`    rA, rB
`movq`      `mrmovq`    D(rB), rA
`movq`      `rmmovq`    rA, D(rB)
`cmov`CC    `cmov`CC    rA, rB      where CC is a condition like `le`, `g`, `e`, etc
all others  omitted

There are no smaller-register variants: no `addl`, `addw`, etc.

In the operands column,

- rA and rB are registers: `%rax`, through `%r14`. Y86 does not have `%r15`.
- V is an immediate value: `$3330` or the like.
- D(rB) is an address:
    either just an immediate `3330`,
    or just a register `(%rax)`,
    or both `3330(%rax)`.
    There are no other addressing modes in Y86-64.

Y86-64 has one fewer condition code bit than x86-64

# Encoding

Y86-64 has a *much* simpler encoding than x86-64:

<svg viewBox="0 0 601 260" font-family="serif" font-size="14">
<text x="200" y="16" text-anchor="end">byte:</text>
<text x="220" y="16" text-anchor="middle">0</text>
<text x="260" y="16" text-anchor="middle">1</text>
<text x="300" y="16" text-anchor="middle">2</text>
<text x="340" y="16" text-anchor="middle">3</text>
<text x="380" y="16" text-anchor="middle">4</text>
<text x="420" y="16" text-anchor="middle">5</text>
<text x="460" y="16" text-anchor="middle">6</text>
<text x="500" y="16" text-anchor="middle">7</text>
<text x="540" y="16" text-anchor="middle">8</text>
<text x="580" y="16" text-anchor="middle">9</text>
<path fill="none" stroke="black" stroke-width="0.25" d="M 200,0 v 260 M 240,0 v 260 M 280,0 v 260 M 320,0 v 260 M 360,0 v 260 M 400,0 v 260 M 440,0 v 260 M 480,0 v 260 M 520,0 v 260 M 560,0 v 260 M 600,0 v 260"/>
<g transform="translate(0,20)">
<rect x="200.5" y="1.5" width="19.5" height="17" fill="#aaf" stroke="black"/>
<rect x="220" y="1.5" width="19.5" height="17" fill="#ccc" stroke="black"/>
<text x="0" y="16" font-family="monospace">halt</text>
<text x="210" y="16" text-anchor="middle" font-family="monospace">0</text>
<text x="230" y="16" text-anchor="middle" font-family="monospace">0</text>
</g>
<g transform="translate(0,40)">
<rect x="200.5" y="1.5" width="19.5" height="17" fill="#aaf" stroke="black"/>
<rect x="220" y="1.5" width="19.5" height="17" fill="#ccc" stroke="black"/>
<text x="0" y="16" font-family="monospace">nop</text>
<text x="210" y="16" text-anchor="middle" font-family="monospace">1</text>
<text x="230" y="16" text-anchor="middle" font-family="monospace">0</text>
</g>
<g transform="translate(0,60)">
<rect x="200.5" y="1.5" width="19.5" height="17" fill="#aaf" stroke="black"/>
<rect x="220" y="1.5" width="19.5" height="17" fill="#c8c" stroke="black"/>
<rect x="240" y="1.5" width="19.5" height="17" fill="#faa" stroke="black"/>
<rect x="260" y="1.5" width="19.5" height="17" fill="#faa" stroke="black"/>
<text x="0" y="16"><tspan font-family="monospace">rrmovq</tspan>/<tspan font-family="monospace">cmov</tspan>CC rA, rB</text>
<text x="210" y="16" text-anchor="middle" font-family="monospace">2</text>
<text x="230" y="16" text-anchor="middle">cc</text>
<text x="250" y="16" text-anchor="middle">rA</text>
<text x="270" y="16" text-anchor="middle">rB</text>
</g>
<g transform="translate(0,80)">
<rect x="200.5" y="1.5" width="19.5" height="17" fill="#aaf" stroke="black"/>
<rect x="220" y="1.5" width="19.5" height="17" fill="#ccc" stroke="black"/>
<rect x="240" y="1.5" width="19.5" height="17" fill="#ccc" stroke="black"/>
<rect x="260" y="1.5" width="19.5" height="17" fill="#faa" stroke="black"/>
<rect x="280" y="1.5" width="319.5" height="17" fill="#afa" stroke="black"/>
<text x="0" y="16"><tspan font-family="monospace">irmovq</tspan> V, rB</text>
<text x="210" y="16" text-anchor="middle" font-family="monospace">3</text>
<text x="230" y="16" text-anchor="middle" font-family="monospace">0</text>
<text x="250" y="16" text-anchor="middle" font-family="monospace">F</text>
<text x="270" y="16" text-anchor="middle">rB</text>
<text x="440" y="16" text-anchor="middle">V</text>
</g>
<g transform="translate(0,100)">
<rect x="200.5" y="1.5" width="19.5" height="17" fill="#aaf" stroke="black"/>
<rect x="220" y="1.5" width="19.5" height="17" fill="#ccc" stroke="black"/>
<rect x="240" y="1.5" width="19.5" height="17" fill="#ccc" stroke="black"/>
<rect x="260" y="1.5" width="19.5" height="17" fill="#faa" stroke="black"/>
<rect x="280" y="1.5" width="319.5" height="17" fill="#afa" stroke="black"/>
<text x="0" y="16"><tspan font-family="monospace">rmmovq</tspan> rA, D(rB)</text>
<text x="210" y="16" text-anchor="middle" font-family="monospace">4</text>
<text x="230" y="16" text-anchor="middle" font-family="monospace">0</text>
<text x="250" y="16" text-anchor="middle">rA</text>
<text x="270" y="16" text-anchor="middle">rB</text>
<text x="440" y="16" text-anchor="middle">D</text>
</g>
<g transform="translate(0,120)">
<rect x="200.5" y="1.5" width="19.5" height="17" fill="#aaf" stroke="black"/>
<rect x="220" y="1.5" width="19.5" height="17" fill="#ccc" stroke="black"/>
<rect x="240" y="1.5" width="19.5" height="17" fill="#ccc" stroke="black"/>
<rect x="260" y="1.5" width="19.5" height="17" fill="#faa" stroke="black"/>
<rect x="280" y="1.5" width="319.5" height="17" fill="#afa" stroke="black"/>
<text x="0" y="16"><tspan font-family="monospace">mrmovq</tspan> D(rB), rA</text>
<text x="210" y="16" text-anchor="middle" font-family="monospace">5</text>
<text x="230" y="16" text-anchor="middle" font-family="monospace">0</text>
<text x="250" y="16" text-anchor="middle">rA</text>
<text x="270" y="16" text-anchor="middle">rB</text>
<text x="440" y="16" text-anchor="middle">D</text>
</g>
<g transform="translate(0,140)">
<rect x="200.5" y="1.5" width="19.5" height="17" fill="#aaf" stroke="black"/>
<rect x="220" y="1.5" width="19.5" height="17" fill="#c8c" stroke="black"/>
<rect x="240" y="1.5" width="19.5" height="17" fill="#faa" stroke="black"/>
<rect x="260" y="1.5" width="19.5" height="17" fill="#faa" stroke="black"/>
<text x="0" y="16">OP<tspan font-family="monospace">q</tspan> rA, rB</text>
<text x="210" y="16" text-anchor="middle" font-family="monospace">6</text>
<text x="230" y="16" text-anchor="middle">fn</text>
<text x="250" y="16" text-anchor="middle">rA</text>
<text x="270" y="16" text-anchor="middle">rB</text>
</g>
<g transform="translate(0,160)">
<rect x="200.5" y="1.5" width="19.5" height="17" fill="#aaf" stroke="black"/>
<rect x="220" y="1.5" width="19.5" height="17" fill="#c8c" stroke="black"/>
<rect x="240" y="1.5" width="319.5" height="17" fill="#afa" stroke="black"/>
<text x="0" y="16"><tspan font-family="monospace">j</tspan>CC Dest</text>
<text x="210" y="16" text-anchor="middle" font-family="monospace">7</text>
<text x="230" y="16" text-anchor="middle">cc</text>
<text x="400" y="16" text-anchor="middle">Dest</text>
</g>
<g transform="translate(0,180)">
<rect x="200.5" y="1.5" width="19.5" height="17" fill="#aaf" stroke="black"/>
<rect x="220" y="1.5" width="19.5" height="17" fill="#ccc" stroke="black"/>
<rect x="240" y="1.5" width="319.5" height="17" fill="#afa" stroke="black"/>
<text x="0" y="16"><tspan font-family="monospace">call</tspan> Dest</text>
<text x="210" y="16" text-anchor="middle" font-family="monospace">8</text>
<text x="230" y="16" text-anchor="middle" font-family="monospace">0</text>
<text x="400" y="16" text-anchor="middle">Dest</text>
</g>
<g transform="translate(0,200)">
<rect x="200.5" y="1.5" width="19.5" height="17" fill="#aaf" stroke="black"/>
<rect x="220" y="1.5" width="19.5" height="17" fill="#ccc" stroke="black"/>
<text x="0" y="16" font-family="monospace">ret</text>
<text x="210" y="16" text-anchor="middle" font-family="monospace">9</text>
<text x="230" y="16" text-anchor="middle" font-family="monospace">0</text>
</g>
<g transform="translate(0,220)">
<rect x="200.5" y="1.5" width="19.5" height="17" fill="#aaf" stroke="black"/>
<rect x="220" y="1.5" width="19.5" height="17" fill="#ccc" stroke="black"/>
<rect x="240" y="1.5" width="19.5" height="17" fill="#faa" stroke="black"/>
<rect x="260" y="1.5" width="19.5" height="17" fill="#ccc" stroke="black"/>
<text x="0" y="16"><tspan font-family="monospace">pushq</tspan> rA</text>
<text x="210" y="16" text-anchor="middle" font-family="monospace">A</text>
<text x="230" y="16" text-anchor="middle" font-family="monospace">0</text>
<text x="250" y="16" text-anchor="middle">rA</text>
<text x="270" y="16" text-anchor="middle" font-family="monospace">F</text>
</g>
<g transform="translate(0,240)">
<rect x="200.5" y="1.5" width="19.5" height="17" fill="#aaf" stroke="black"/>
<rect x="220" y="1.5" width="19.5" height="17" fill="#ccc" stroke="black"/>
<rect x="240" y="1.5" width="19.5" height="17" fill="#faa" stroke="black"/>
<rect x="260" y="1.5" width="19.5" height="17" fill="#ccc" stroke="black"/>
<text x="0" y="16"><tspan font-family="monospace">popq</tspan> rA</text>
<text x="210" y="16" text-anchor="middle" font-family="monospace">B</text>
<text x="230" y="16" text-anchor="middle" font-family="monospace">0</text>
<text x="250" y="16" text-anchor="middle">rA</text>
<text x="270" y="16" text-anchor="middle" font-family="monospace">F</text>
</g>
</svg>

Note that instructions can be 1, 2, 9, or 10 bytes long; how long they are is determined by the high-order nyble of the first byte.

Two instructions use a special low-order nyble of the first byte to further refine the function:

| value | cc meaning | fn meaning |
|:-----:|:----------:|:-----------|
| 0 | *always*<br/>(`jmp`/`rrmovq`) |  |
| 1 | `le` | `add` |
| 2 | `l`  | `sub` |
| 3 | `e`  | `and` |
| 4 | `ne` | `xor` |
| 5 | `ge` | *undefined* |
| 6 | `g`  | *undefined* |
|7–F| *undefined*  | *undefined*  |



